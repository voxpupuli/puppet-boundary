# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`boundary`](#boundary): Installs, configures, and manages boundary

#### Private Classes

* `boundary::config`: This class is called from boundary::init to install the config file.
* `boundary::install`: This class is called from boundary::init to install the config file.
* `boundary::reload_service`: This class is meant to be called from certain configuration changes that support reload.
* `boundary::run_service`: This class is meant to be called from boundary It ensure the service is running

## Classes

### <a name="boundary"></a>`boundary`

Installs, configures, and manages boundary

#### Examples

##### To set up a single boundary server, with several agents attached, on the server.

```puppet
class { 'boundary':
  config_hash => {
    'region'     => 'us-west',
    'datacenter' => 'ptk',
    'log_level'  => 'INFO',
    'bind_addr'  => '0.0.0.0',
    'data_dir'   => '/opt/boundary',
    'server'     => {
      'enabled'          => true,
      'bootstrap_expect' => 3,
    }
  }
}
```

##### On the agent(s)

```puppet
class { 'boundary':
  config_hash => {
    'region'     => 'us-west',
    'datacenter' => 'ptk',
    'log_level'  => 'INFO',
    'bind_addr'  => '0.0.0.0',
    'data_dir'   => '/opt/boundary',
    'client'     => {
      'enabled' => true,
      'servers' => [
        "boundary01.your-org.pvt:4647",
        "boundary02.your-org.pvt:4647",
        "boundary03.your-org.pvt:4647"
      ]
    }
  },
}
```

##### Install from zip file for a CPU architecture HashiCorp does not provide native packages for.

```puppet
class { 'boundary':
  arch                => 'armv7l',
  install_method      => 'url',
  manage_service_file => true,
  version             => '1.0.3', # check latest version at https://github.com/hashicorp/boundary/blob/master/CHANGELOG.md
  config_hash         => {
    'region'     => 'us-west',
    'datacenter' => 'ptk',
    'log_level'  => 'INFO',
    'bind_addr'  => '0.0.0.0',
    'data_dir'   => '/opt/boundary',
    'client'     => {
      'enabled' => true,
      'servers' => [
        "boundary01.your-org.pvt:4647",
        "boundary02.your-org.pvt:4647",
        "boundary03.your-org.pvt:4647"
      ]
    }
  },
}
```

##### Disable install and service components

```puppet
class { 'boundary':
  install_method => 'none',
  manage_service => false,
  config_hash    => {
    region     => 'us-west',
    datacenter => 'ptk',
    log_level  => 'INFO',
    bind_addr  => '0.0.0.0',
    data_dir   => '/opt/boundary',
    'client'     => {
      'enabled' => true,
      'servers' => [
        "boundary01.your-org.pvt:4647",
        "boundary02.your-org.pvt:4647",
        "boundary03.your-org.pvt:4647"
      ]
    }
  },
}
```

#### Parameters

The following parameters are available in the `boundary` class:

* [`arch`](#-boundary--arch)
* [`purge_config_dir`](#-boundary--purge_config_dir)
* [`data_dir_mode`](#-boundary--data_dir_mode)
* [`join_wan`](#-boundary--join_wan)
* [`bin_dir`](#-boundary--bin_dir)
* [`version`](#-boundary--version)
* [`install_method`](#-boundary--install_method)
* [`os`](#-boundary--os)
* [`download_url`](#-boundary--download_url)
* [`download_url_base`](#-boundary--download_url_base)
* [`download_extension`](#-boundary--download_extension)
* [`package_name`](#-boundary--package_name)
* [`config_dir`](#-boundary--config_dir)
* [`extra_options`](#-boundary--extra_options)
* [`config_hash`](#-boundary--config_hash)
* [`config_defaults`](#-boundary--config_defaults)
* [`config_validator`](#-boundary--config_validator)
* [`config_mode`](#-boundary--config_mode)
* [`manage_repo`](#-boundary--manage_repo)
* [`manage_service`](#-boundary--manage_service)
* [`manage_service_file`](#-boundary--manage_service_file)
* [`pretty_config`](#-boundary--pretty_config)
* [`service_enable`](#-boundary--service_enable)
* [`service_ensure`](#-boundary--service_ensure)
* [`restart_on_change`](#-boundary--restart_on_change)
* [`env_vars`](#-boundary--env_vars)
* [`user`](#-boundary--user)
* [`group`](#-boundary--group)

##### <a name="-boundary--arch"></a>`arch`

Data type: `String[1]`

cpu architecture

##### <a name="-boundary--purge_config_dir"></a>`purge_config_dir`

Data type: `Boolean`

Purge config files no longer generated by Puppet

Default value: `true`

##### <a name="-boundary--data_dir_mode"></a>`data_dir_mode`

Data type: `Stdlib::Filemode`

Specify unix permissions for data dir directory managed by this module

Default value: `'0755'`

##### <a name="-boundary--join_wan"></a>`join_wan`

Data type: `Optional[String[1]]`

join boundary cluster over the WAN

Default value: `undef`

##### <a name="-boundary--bin_dir"></a>`bin_dir`

Data type: `Stdlib::Absolutepath`

location of the boundary binary

Default value: `'/usr/bin'`

##### <a name="-boundary--version"></a>`version`

Data type: `String[1]`

Specify version of boundary binary to download.

Default value: `'installed'`

##### <a name="-boundary--install_method"></a>`install_method`

Data type: `Enum['none', 'package', 'url']`

install via system package, download and extract from a url.

Default value: `'package'`

##### <a name="-boundary--os"></a>`os`

Data type: `String[1]`

operation system to install for

Default value: `downcase($facts['kernel'])`

##### <a name="-boundary--download_url"></a>`download_url`

Data type: `Optional[String[1]]`

download url to download from

Default value: `undef`

##### <a name="-boundary--download_url_base"></a>`download_url_base`

Data type: `String[1]`

download hostname to down from

Default value: `'https://releases.hashicorp.com/boundary/'`

##### <a name="-boundary--download_extension"></a>`download_extension`

Data type: `String[1]`

archive type to download

Default value: `'zip'`

##### <a name="-boundary--package_name"></a>`package_name`

Data type: `String[1]`

Only valid when the install_method == package.

Default value: `'boundary'`

##### <a name="-boundary--config_dir"></a>`config_dir`

Data type: `Stdlib::Absolutepath`

location of the boundary configuration

Default value: `'/etc/boundary.d'`

##### <a name="-boundary--extra_options"></a>`extra_options`

Data type: `Optional[String[1]]`

Extra arguments to be passed to the boundary agent

Default value: `undef`

##### <a name="-boundary--config_hash"></a>`config_hash`

Data type: `Hash`

Use this to populate the JSON config file for boundary.

Default value: `{}`

##### <a name="-boundary--config_defaults"></a>`config_defaults`

Data type: `Hash`

default set of config settings

Default value: `{}`

##### <a name="-boundary--config_validator"></a>`config_validator`

Data type:

```puppet
Variant[
    Enum['boundary_validator', 'ruby_validator'], Pattern[/\A.*\ %\z/]
  ]
```

Use this to set the JSON config file validation command. It defaults to boundary validator which is currenly missing some validation checks.
If ruby is available on the system you could use 'ruby_validator', or create your own script (ending with space and % symbol).

Default value: `'boundary_validator'`

##### <a name="-boundary--config_mode"></a>`config_mode`

Data type: `Stdlib::Filemode`

Use this to set the JSON config file mode for boundary.

Default value: `'0660'`

##### <a name="-boundary--manage_repo"></a>`manage_repo`

Data type: `Boolean`

Configure the upstream HashiCorp repository. Only relevant when $boundary::install_method = 'package'.

Default value: `true`

##### <a name="-boundary--manage_service"></a>`manage_service`

Data type: `Boolean`

manage the boundary service

Default value: `true`

##### <a name="-boundary--manage_service_file"></a>`manage_service_file`

Data type: `Boolean`

create and manage the systemd service file

Default value: `false`

##### <a name="-boundary--pretty_config"></a>`pretty_config`

Data type: `Boolean`

Generates a human readable JSON config file.

Default value: `false`

##### <a name="-boundary--service_enable"></a>`service_enable`

Data type: `Boolean`

enable the boundary service

Default value: `true`

##### <a name="-boundary--service_ensure"></a>`service_ensure`

Data type: `Stdlib::Ensure::Service`

ensure the state of the boundary service

Default value: `'running'`

##### <a name="-boundary--restart_on_change"></a>`restart_on_change`

Data type: `Boolean`

Determines whether to restart boundary agent on $config_hash changes. This will not affect reloads when service, check or watch configs change.

Default value: `true`

##### <a name="-boundary--env_vars"></a>`env_vars`

Data type: `Hash[String[1], String]`

Hash of optional environment variables that should be passed to boundary

Default value: `{}`

##### <a name="-boundary--user"></a>`user`

Data type: `String[1]`

User to run the Boundary binary as. Also used as owner of directories and config files managed by this module.

Default value: `'root'`

##### <a name="-boundary--group"></a>`group`

Data type: `String[1]`

Group to run the Boundary binary as. Also used as group of directories and config files managed by this module.

Default value: `'root'`

